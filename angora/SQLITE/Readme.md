# 数据库中关于 Bulk Inserts 问题的思考

----------

## 什么是Bulk Inserts?
Bulk Insert从字面上看, 就是将大量数据写入数据库的意思。

数据库在写入数据时, 为了保证数据库的[完整性](http://baike.baidu.com/view/702953.htm "Integrity"), 通常先将数据写入一个足够大的缓存中, 直到确保所有写入的数据没有问题, 再统一写入磁盘进行更新, 也就是[commit](http://en.wikipedia.org/wiki/Commit_%28data_management%29 "Commit"); 在这个期间, 所涉及的数据块是被锁住的, 不可以对其进行其他的写操作。 而如果期间发生任何错误, 数据库就会[回滚](http://en.wikipedia.org/wiki/Rollback_%28data_management%29 "rollback")到上一次commit时的状态。 也就是说, 要么全部成功, 要么全部失败。 **而相比将数据写入缓存, 将数据写入磁盘会消耗多得多的时间**。

**下面我们来考虑一个例子**

我们想要插入1000条数据, 我们有两种方式:

1. 将所有数据全部写入缓存, 再commit。
2. 每次只将一条数据写入缓存, 然后马上commit。

考虑到一个事实, 分1000次写入磁盘的速度, 要远远慢于1次写入1000条记录的量, 我们可以得出如下结论:

	如果我们能事先知道这1000条数据能够写入成功, 那么方法1的速度会远远快于方法2

但是如果我们无法事先得知这次写操作能成功, 我们也许只能够一条条的尝试插入了。

## 另一条阳光大道
